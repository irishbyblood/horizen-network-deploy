# Common Druid Configuration
# This file is shared across all Druid services

# Extensions
druid.extensions.loadList=["druid-histogram", "druid-datasketches", "druid-lookups-cached-global", "postgresql-metadata-storage", "druid-kafka-indexing-service", "druid-s3-extensions"]

# Logging
druid.startup.logging.logProperties=true

# ZooKeeper
druid.zk.service.host=zookeeper:2181
druid.zk.paths.base=/druid

# Metadata storage (PostgreSQL)
druid.metadata.storage.type=postgresql
druid.metadata.storage.connector.connectURI=jdbc:postgresql://postgres:5432/druid_metadata
druid.metadata.storage.connector.user=druid
druid.metadata.storage.connector.password=${POSTGRES_PASSWORD:-changeme}

# Deep storage (local for development, use S3/HDFS for production)
druid.storage.type=local
druid.storage.storageDirectory=/opt/druid/var/druid/segments

# Indexing service logs
druid.indexer.logs.type=file
druid.indexer.logs.directory=/opt/druid/var/druid/indexing-logs

# Service discovery
druid.selectors.indexing.serviceName=druid/overlord
druid.selectors.coordinator.serviceName=druid/coordinator

# Monitoring
druid.monitoring.monitors=["org.apache.druid.java.util.metrics.JvmMonitor"]
druid.emitter=logging
druid.emitter.logging.logLevel=info

# Storage type of double columns
druid.indexing.doubleStorage=double

# SQL
druid.sql.enable=true

# Processing
druid.processing.buffer.sizeBytes=536870912
druid.processing.numThreads=2
druid.processing.numMergeBuffers=2

# HTTP server threads
druid.server.http.numThreads=25

# Segment cache
druid.segmentCache.locations=[{"path":"/opt/druid/var/druid/segment-cache","maxSize":10737418240}]

# Authentication and authorization (basic setup)
druid.auth.authenticatorChain=["allowAll"]
druid.auth.authenticator.allowAll.type=allowAll
druid.auth.authorizers=["allowAll"]
druid.auth.authorizer.allowAll.type=allowAll

# HTTP settings
druid.server.http.showDetailedJettyErrors=true
druid.server.http.enableForwardedRequestCustomizer=true
